CKEDITOR.plugins.add("eqneditor",{availableLangs:{en:1},lang:"en",requires:["dialog"],icons:"eqneditor",init:function(e){var t="https:"==document.location.protocol?"https://":"http://";CKEDITOR.scriptLoader.load([t+"latex.codecogs.com/js/eq_config.js",t+"latex.codecogs.com/js/eq_editor-lite-16.js"]);var n=document.createElement("link");n.setAttribute("rel","stylesheet");n.setAttribute("type","text/css");n.setAttribute("href",t+"latex.codecogs.com/css/equation-embed.css");document.getElementsByTagName("head")[0].appendChild(n);var r="eqneditorDialog";e.addCommand(r,new CKEDITOR.dialogCommand(r,{allowedContent:"img[src,alt]",requiredContent:"img[src,alt]"}));CKEDITOR.dialog.add(r,this.path+"dialogs/eqneditor.min.js");e.ui.addButton("EqnEditor",{label:e.lang.eqneditor.toolbar,command:r,toolbar:"insert"});if(e.contextMenu){e.addMenuGroup(e.lang.eqneditor.menu);e.addMenuItem("eqneditor",{label:e.lang.eqneditor.edit,icon:this.path+"icons/eqneditor.png",command:r,group:e.lang.eqneditor.menu});e.contextMenu.addListener(function(e){var t={};if(e.getAscendant("img",true)){var n=e.getAttribute("src").match(/(gif|svg)\.latex\?(.*)/);if(n!=null){t["eqneditor"]=CKEDITOR.TRISTATE_OFF;return t}}})}e.on("doubleclick",function(e){var t=e.data.element;if(t&&t.is("img")){var n=t.getAttribute("src").match(/(gif|svg)\.latex\?(.*)/);if(n!=null){e.data.dialog=r;e.cancelBubble=true;e.returnValue=false;e.stop()}}},null,null,1)}})
