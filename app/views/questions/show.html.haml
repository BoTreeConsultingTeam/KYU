.container-fluid
  .row
    / END HEADER
    #header_sidebar.col-md-12.col-xs-12
    = render 'layouts/left_sidebar'
    .col-md-8.main-content.single-content
      .row.select-category.single-head
        .col-md-2.col-xs-2
          %span.back
            %i.fa.fa-angle-double-left
            %a 
              = link_to 'Home',questions_path
        .col-md-8.col-xs-8
          %h3 
            = @question.title
      / END SELECT-CATEGORY
      #question_content.row.question-main-content.question-item{"data-id" => "1728"}
        / Vote section
        .col-md-2.col-xs-2.vote-block
          / vote group
          %ul
            %li{"data-original-title" => "This is useful.", :title => ""}
              = vote_up_question_link(@question)
            / // vote up
            / vote point
            %li
              %span.vote-count 
                = @question.get_likes.size
            %li
              %span.vote-count   
                = @question.get_dislikes.size
            / // vote point
            / vote down
            %li{"data-original-title" => "This is useful.", :title => ""}
              = vote_down_question_link(@question)
              / // vote down
          / // vote group
        / // Vote section
        .col-md-9.col-xs-9.q-right-content
          / admin control
          %ul.post-controls
            %li
              = link_to '',edit_question_path(@question.id),class: 'post-edit action fa fa-pencil'
            %li
              = link_to '',question_path,method: :delete,data: {confirm:'Are you sure?'},class: 'post-delete action fa fa-trash-o'
            / Follow Action
            %li
              %a.action.follow{"data-name" => "follow", "data-original-title" => "Follow", "data-toggle" => "tooltip", :href => "javascript:void(0)"}
                %i.fa.fa-plus-square
            / // Follow Action
            / report Action
            / // Report Action
          / // admin control
          / question tag
          .top-content
            %span.answered
              %i.fa.fa-check
              Answered
            %ul.question-tags
              - @question.tag_list.each do |tag|
                %li
                  = link_to tag, tag_path(tag),class: 'q-tag'   
          .clearfix
          .question-content
            = raw(@question.content)
          .row
            .col-md-8.col-xs-9.question-cat
              %a{:href => "http://demo.enginethemes.com/qaengine/member/admindemo/"}
                %span.author-avatar
                  %img.avatar{:alt => "", :src => "http://1.gravatar.com/avatar/3743112a070d24fe4dbd5cb39d6a5e9e?s=30&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D30&amp;r=G"} 
                %span.author-name Admin Demo
              %span.user-badge{:style => "background-color:#04aad4;"} 
                = @question.askable.class
              %span.question-time
                #{time_ago_in_words(@question.created_at)} ago.
            .col-md-4.col-xs-4.question-control
              %ul
                %li
                  = link_to 'Comment','#comment',class: 'toggleLink', id: "q#{@question.id}",'data-no-turbolink' => true
                  (
                  = @question.comments.count
                  )
          .comments-container.collapse.hidden_comment-box{id: 'commentq' + "#{@question.id}"}              
            = render partial:'comments/form',locals: {type: 'new',object: @question}       
          %br/
          = render 'comments/show_comments_of_questions'               
          .clearfix
          
            / END SUBMIT FORM COMMENT
          / END COMMENTS CONTAINER
      / END QUESTION-MAIN-CONTENT
      .sticky-wrapper
        #answers_filter.row.answers-filter
          .max-col-md-8
            .col-md-6.col-xs-6
              %span.answers-count
                %span.number 
                  = @question.answers.count
                Answers
            .col-md-6.col-xs-6.sort-questions
              %ul
                %li
                  %a.active{:href => "http://demo.enginethemes.com/qaengine/question/what-are-some-of-your-favorite-deep-awe-inspiring-andor-thought-provoking-movies/"} Votes
                /
                  <li>
                  <a class="" href="/qaengine/question/what-are-some-of-your-favorite-deep-awe-inspiring-andor-thought-provoking-movies/?sort=active">Active</a>
                  </li>
                %li
                  %a{:href => "/qaengine/question/what-are-some-of-your-favorite-deep-awe-inspiring-andor-thought-provoking-movies/?sort=oldest"} Oldest
      / ANSWERS LOOP
      #answers_main_list
        -@answers.each do |answer|
          #74.row.question-main-content.question-item.answer-item
            .col-md-2.col-xs-2.vote-block
              / vote group
              %ul
                / vote up
                %li{"data-original-title" => "This is useful.", :title => ""}
                  = vote_up_answer_link(answer)                    
                 
                    
                / // vote up
                / vote point
                %li{"data-original-title" => "", :title => ""}
                  %span.vote-count 
                    = answer.get_likes.size
                %li{"data-original-title" => "", :title => ""}
                  %span.vote-count 

                    = answer.get_dislikes.size
                / // vote point
                / vote down
                %li{"data-original-title" => "This is useful.", :title => ""}
                  = vote_down_answer_link(answer)
                / // vote down
              / // vote group
            .col-md-9.col-xs-9.q-right-content
              / control tool for admin, moderate
              %ul.post-controls
                %li
                  = link_to '',edit_question_answer_path(@question.id,answer.id),class: 'post-edit action fa fa-pencil'
                %li
                  = link_to '', question_answer_path(@question.id,answer.id),method: :delete,class: 'post-delete action fa fa-trash-o'
              / // control tool for admin, moderate
              .clearfix
              .question-content
                = raw(answer.content)
              .row.cat-infomation
                / Answer owner infomation
                .col-md-8.col-xs-8.question-cat
                  %a{:href => "http://demo.enginethemes.com/qaengine/member/admin/"}
                    %span.author-avatar
                      %img.avatar{:alt => "", :src => "http://demo.enginethemes.com/qaengine/wp-content/uploads/2014/08/1282.jpg"}         
                    %span.author-name
                      = answer.answerable.username
                  %span.user-badge{:style => "background-color:#780978;", :title => "1543"} 
                    = answer.answerable_type
                  %span.question-time
                    #{time_ago_in_words(answer.created_at)} ago.
                / // Answer owner infomation
                .col-md-4.col-xs-4.question-control
                  / share comment , report
                  %ul
                    %li
                      = link_to 'Comment','#comment',class: 'toggleLink', id: "#{answer.id}",'data-no-turbolink' => true
                      (
                      = answer.comments.count
                      )
                / // share comment , repor
              .comments-container.collapse.hidden_comment-box{id: 'comment' + "#{answer.id}"}
                = form_for (@comment) do |f|
                  = f.text_area :comment,:toolbar => 'mini', :class => 'ckeditor', style: 'width: none !important;',id: "text" + "#{answer.id}"
                  = f.hidden_field :relative, :value => answer
                  = f.hidden_field :relative_type, :value => answer.class.to_s
                  = f.hidden_field :relative_id, :value => answer.id
                  %br/
                  = submit_tag "Post",class: 'btn btn-lg btn-primary'
                / %a.hide-comment{:href => "javascript:void(0)"} Cancel
              %br/
              -@comments_a.each do |c|
                %div.row
                  - if c.relative == answer
                    .col-md-10
                      = raw(c.comment)
                      %hr/
                    .col-md-2    
                      - if c.is_author?(current_user)
                        =link_to '',edit_answer_comment_path(answer.id,c.id),class: 'fa fa-pencil'
                        |
                        = link_to '',answer_comment_path(answer.id,c),method: :delete,data: {confirm: "are you sure?"},class: 'fa fa-trash-o'
            / END SUBMIT FORM COMMENT
              
                
          / END REPLY-ITEM
        
        / END REPLY-ITEM
      / ANSWERS LOOP
      .row.paginations.collapse
        .col-md-12
      / END PAGINATIONS
      
      .row.form-reply
        .col-md-12
          %h3 Your Answer
          .modal-submit-questions
            .modal-dialog
              .modal-body
                = form_for (@answer) do |f|
                  = f.text_area :content,:toolbar => 'mini', :class => 'ckeditor',style: 'width: none !important;'
                  = f.hidden_field :user_id, :value => current_user.id  
                  = f.hidden_field :question_id, :value => @question.id
                  %div
                    = f.submit t('questions.btn.submit'),class: 'btn-submit-question', id: 'btn_submit_question'
        
      / END FORM REPLY
    = render 'layouts/right_sidebar'


:javascript
  $(function(){
      $('.toggleLink').click(function(){
          $("#comment" + this.id).slideToggle();
      });
  });